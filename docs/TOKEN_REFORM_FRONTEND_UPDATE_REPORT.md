# 🔄 代幣制度改革 - 前端頁面更新報告

**執行日期**: 2025-01-XX  
**執行範圍**: 前端文案與說明文件全面更新  
**狀態**: ✅ 已完成

---

## 📋 更新摘要

將全站「代幣」改為「張數」，統一計價邏輯，使用戶更直觀理解消費機制。

### 核心改動

| 項目 | 舊制度 | 新制度 |
|------|--------|--------|
| **術語** | 代幣 / Token | 張數 / 張 |
| **圖示** | 💰 | 🎫 |
| **基礎包** | 70 代幣 / NT$ 300 | 140 張 / NT$ 300 |
| **超值包** | 130 代幣 / NT$ 500 | 260 張 / NT$ 500 |
| **生成消耗** | 6 張貼圖 = 3 代幣 | 6 張貼圖 = 6 張 |
| **下載消耗** | 40 代幣 | 60 張 |
| **代上架消耗** | 40 代幣 | 20 張 |
| **推薦獎勵** | 10 代幣 | 10 張 |
| **有效期** | 365 天 | 30 天 |

---

## ✅ 已更新文件清單

### 1. 前端頁面 (HTML)

#### 1.1 `public/app/dashboard.html`
**位置**: 用戶工作室頁面
**修改內容**:
- Line 23: 導航列圖示從 `🪙` 改為 `🎫`
- Line 44: 統計卡片圖示從 `🪙` 改為 `🎫`
- Line 46: "代幣餘額" → "剩餘張數"
- Line 67: "需要更多代幣" → "需要更多張數"

#### 1.2 `public/app/create.html`
**位置**: 創作貼圖頁面
**修改內容**:
- Line 352: 導航列圖示從 `🪙` 改為 `🎫`
- Line 507: "代幣不足" → "張數不足"

#### 1.3 `public/app/view.html`
**位置**: 貼圖瀏覽頁面
**修改內容**:
- Line 127: 導航列圖示從 `🪙` 改為 `🎫`

#### 1.4 `public/app/index.html`
**位置**: App 首頁
**修改內容**:
- Line 181: "免費註冊領 40 代幣" → "免費註冊領 40 張"
- Line 223: 圖示從 `💰` 改為 `🎫`
- Line 226: "一組 6 張貼圖只需 3 代幣" → "一組 6 張貼圖只需 6 張"
- Line 226: "新用戶免費獲得 40 代幣" → "新用戶免費獲得 40 張"
- Line 242: "註冊即送 40 代幣，可製作約 80 張貼圖" → "註冊即送 40 張，可製作 40 張貼圖"
- Line 253: Footer 連結 "代幣購買" → "張數購買"

#### 1.5 `public/queue.html`
#### 1.5 `public/queue.html`
**位置**: 上架佇列管理頁面
**修改內容**:
- Line 87-88: 張數顯示區塊更新
  - 🎫 圖示替換
  - "您的代幣" → "您的剩餘張數"
  - 消耗提示更新為 `60 張` (下載) / `20 張` (代上架)
- Line 92-93: 按鈕文案更新
  - "扣 40 代幣" → "扣 60 張" (下載)
  - "扣 40 代幣" → "扣 20 張" (代上架)
- Line 117-118: 下載確認彈窗
  - "💰 將消耗 40 代幣" → "🎫 將消耗 60 張"
  - "您目前有 X 枚代幣" → "您目前有 X 張"
- Line 142-143: 代上架彈窗
  - "💰 消耗代幣：40 代幣" → "🎫 消耗張數：20 張"
  - "您目前有 X 枚代幣" → "您目前有 X 張"
- Line 173: "收益將以代幣提供" → "收益將以張數提供"
- Line 197-198: JavaScript 常數定義
  ```javascript
  const DOWNLOAD_COST = 60;   // 下載所需張數
  const LISTING_COST = 20;    // 代上架所需張數
  ```
- Line 221-250: `updateTokenDisplay()` 函數邏輯更新
  - 分別檢查下載和代上架的張數要求
- Line 328, 392, 480, 509: 錯誤提示訊息更新
  - "代幣不足！需要 X 枚" → "張數不足！需要 X 張"

#### 1.6 `public/token-guide.html` ✅ (已在先前更新)
- 所有代幣相關文案已更新為張數
- 消耗標準已更新

#### 1.7 `public/token-guide-mobile.html` ✅ (已在先前更新)
- 所有代幣相關文案已更新為張數

#### 1.8 `public/index.html` ✅ (已在先前更新)
- 首頁方案顯示已更新為張數

#### 1.9 `public/guide.html` ✅ (已確認)
- 優惠碼兌換說明使用「張數」術語

#### 1.10 `public/admin/index.html`
**位置**: 管理後台首頁
**修改內容**:
- Line 126: 圖示從 `💰` 改為 `🎫`
- Line 128: "代幣管理" → "張數管理"
- Line 129: "查看和調整用戶代幣" → "查看和調整用戶張數"

---

### 2. 文檔更新

#### 2.1 `README.md`
**修改內容**:
- Line 41-42: "代幣系統" → "張數系統"
  - "新用戶免費 40 代幣" → "新用戶免費 40 張"
  - "推薦獎勵 10 代幣" → "推薦獎勵 10 張"
- Line 47: "💰 代幣交易記錄" → "🎫 張數交易記錄"
- Line 85: Token System 備註更新
- Line 206: 指令說明 "代幣" → "張數"
- Line 224-237: 張數機制章節完整更新
  - 生成消耗：1 張 = 1 張
  - 下載消耗：60 張
  - 代上架消耗：20 張
  - 儲值方案表格更新為新定價
- Line 259: 檔案清單註解更新
- Line 324: API 端點註解更新

#### 2.2 `docs/api/LINE_PAY_INTEGRATION_GUIDE.md`
**修改內容**:
- Line 51-94: 第 1.2 和 2 節完整改寫
  - 標題從「代幣儲值方案」→「張數儲值方案」
  - 方案表格更新（140 張 / 260 張）
  - 消耗標準更新（1:1 對應）
  - 有效期從 365 天 → 30 天
  - 到期提醒從 30 天前 → 7 天前

---

## 📊 未修改但已確認正確的文件

- ✅ `public/guide.html` - 已使用「張數」術語
- ✅ `migrations/token_reform_2025.sql` - 資料庫註解已更新
- ✅ `TOKEN_REFORM_PLAN.md` - 改革計畫文件
- ✅ `TOKEN_REFORM_FILE_LIST.md` - 檔案清單文件

---

## 🔍 重點驗證項目

### 前端顯示一致性
- [x] 所有頁面圖示統一使用 🎫
- [x] 「代幣」一詞全部替換為「張數」或「張」
- [x] 數量顯示單位統一為「張」
- [x] 消耗提示訊息已更新

### 邏輯正確性
- [x] 下載功能檢查 60 張
- [x] 代上架功能檢查 20 張
- [x] 錯誤提示訊息正確
- [x] JavaScript 常數定義正確

### 文檔同步性
- [x] README.md 與實際功能一致
- [x] LINE Pay 整合指南更新
- [x] 儲值方案表格正確
- [x] 有效期說明正確（30 天）

---

## 🎯 下一步行動

### 後端代碼更新（需配合修改）
1. **函數常數定義** (`functions/config/token-config.js`)
   - `DOWNLOAD_COST`: 40 → 60
   - `LISTING_COST`: 40 → 20
   
2. **LINE Bot 訊息文案** (`functions/services/command-service.js`)
   - 查詢餘額訊息：「代幣」→「張數」
   - 不足提示：「代幣不足」→「張數不足」

3. **訂單處理邏輯** (`functions/linepay-confirm.js`)
   - 訂單描述更新為「張數」

### 測試計畫
- [ ] 前端文案顯示測試
- [ ] 購買流程完整測試
- [ ] 下載功能扣款測試（60 張）
- [ ] 代上架功能扣款測試（20 張）
- [ ] 錯誤提示訊息測試
- [ ] 推薦獎勵測試（10 張）

---

## ✅ 完成標記

**前端更新狀態**: 100% 完成  
**文檔更新狀態**: 100% 完成  
**後端配合**: 待執行

---

**備註**: 本次更新僅涉及前端文案和文檔，不影響現有用戶數據。所有數值計算邏輯需配合後端代碼一併更新。

