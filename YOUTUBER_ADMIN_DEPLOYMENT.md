# YouTuber æ¨å»£ç®¡ç†åŠŸèƒ½ - éƒ¨ç½²æŒ‡å—

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

ç®¡ç†å“¡å¯ä»¥åœ¨å¾Œå°å¯©æ ¸ YouTuber æ¨å»£ç”³è«‹ï¼Œä¸¦è‡ªå‹•ç™¼æ”¾ä»£å¹£çå‹µï¼š
- **æ‰¹å‡†ç”³è«‹** â†’ è‡ªå‹•ç™¼æ”¾ 50 ä»£å¹£
- **æ‰¹å‡†å½±ç‰‡** â†’ è‡ªå‹•ç™¼æ”¾ 250 ä»£å¹£
- **ç¸½è¨ˆçå‹µ** â†’ 300 ä»£å¹£

---

## ğŸš€ éƒ¨ç½²æ­¥é©Ÿ

### ç¬¬ 1 æ­¥ï¼šæ›´æ–° Supabase è³‡æ–™è¡¨

åœ¨ Supabase Dashboard â†’ SQL Editor ä¸­åŸ·è¡Œï¼š

```sql
-- æ–¹æ¡ˆ Aï¼šå¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œå‰µå»ºæ–°è¡¨
-- åŸ·è¡Œ supabase/migrations/20250115_youtuber_promotion.sql

-- æ–¹æ¡ˆ Bï¼šå¦‚æœè¡¨å·²å­˜åœ¨ï¼Œæ·»åŠ æ–°æ¬„ä½
-- åŸ·è¡Œ supabase/migrations/20250116_add_youtuber_video_fields.sql
```

### ç¬¬ 2 æ­¥ï¼šéƒ¨ç½² Netlify Functions

å·²å‰µå»ºçš„ä¸‰å€‹æ–°å‡½æ•¸ï¼š
1. `functions/youtuber-promotion-list.js` - ç²å–ç”³è«‹åˆ—è¡¨
2. `functions/youtuber-promotion-approve.js` - å¯©æ ¸ç”³è«‹ï¼ˆå«ä»£å¹£ç™¼æ”¾ï¼‰
3. `functions/youtuber-promotion-approve-video.js` - å¯©æ ¸å½±ç‰‡ï¼ˆå«ä»£å¹£ç™¼æ”¾ï¼‰

é€™äº›å‡½æ•¸æœƒåœ¨ `git push` å¾Œè‡ªå‹•éƒ¨ç½²åˆ° Netlifyã€‚

### ç¬¬ 3 æ­¥ï¼šé©—è­‰éƒ¨ç½²

1. **è¨ªå•ç®¡ç†å¾Œå°é¦–é **
   - URL: `https://your-domain.netlify.app/admin/`
   - æ‡‰è©²çœ‹åˆ°ã€ŒğŸ¬ YouTuber æ¨å»£ç®¡ç†ã€å¡ç‰‡

2. **è¨ªå• YouTuber ç®¡ç†é é¢**
   - URL: `https://your-domain.netlify.app/admin/youtuber-applications.html`
   - æ‡‰è©²çœ‹åˆ°çµ±è¨ˆå¡ç‰‡å’Œç”³è«‹åˆ—è¡¨

---

## ğŸ“Š ç®¡ç†åŠŸèƒ½èªªæ˜

### çµ±è¨ˆé¢æ¿
- **å¾…å¯©æ ¸ç”³è«‹** - éœ€è¦ç®¡ç†å“¡æ‰¹å‡†çš„æ–°ç”³è«‹
- **å·²æ‰¹å‡†** - å·²æ‰¹å‡†ä½†é‚„æœªæäº¤å½±ç‰‡
- **å·²å®Œæˆ** - å½±ç‰‡å·²å¯©æ ¸é€šéï¼Œçå‹µå·²ç™¼æ”¾
- **å·²æ‹’çµ•** - è¢«æ‹’çµ•çš„ç”³è«‹

### å¯©æ ¸æµç¨‹

#### 1. å¯©æ ¸ç”³è«‹ï¼ˆå¾…å¯©æ ¸ â†’ å·²æ‰¹å‡†ï¼‰
- é»æ“Šã€ŒæŸ¥çœ‹è©³æƒ…ã€
- æŸ¥çœ‹é »é“è³‡è¨Šã€è¨‚é–±æ•¸ã€æ‹ç‰‡è¨ˆç•«
- é»æ“Šã€Œâœ… æ‰¹å‡†ï¼ˆç™¼æ”¾ 50 ä»£å¹£ï¼‰ã€
- ç³»çµ±è‡ªå‹•ï¼š
  - æ›´æ–°ç‹€æ…‹ç‚º `approved`
  - ç™¼æ”¾ 50 ä»£å¹£åˆ°ç”¨æˆ¶å¸³æˆ¶
  - è¨˜éŒ„äº¤æ˜“åˆ° `token_transactions` è¡¨

#### 2. å¯©æ ¸å½±ç‰‡ï¼ˆå·²æ‰¹å‡† â†’ å·²å®Œæˆï¼‰
- YouTuber æäº¤å½±ç‰‡å¾Œ
- é»æ“Šã€ŒæŸ¥çœ‹è©³æƒ…ã€
- æŸ¥çœ‹å½±ç‰‡é€£çµ
- é»æ“Šã€Œâœ… æ‰¹å‡†å½±ç‰‡ï¼ˆç™¼æ”¾ 250 ä»£å¹£ï¼‰ã€
- ç³»çµ±è‡ªå‹•ï¼š
  - æ›´æ–°ç‹€æ…‹ç‚º `completed`
  - ç™¼æ”¾ 250 ä»£å¹£åˆ°ç”¨æˆ¶å¸³æˆ¶
  - è¨˜éŒ„äº¤æ˜“åˆ° `token_transactions` è¡¨

---

## ğŸ”§ ä»£å¹£ç™¼æ”¾æ©Ÿåˆ¶

### è‡ªå‹•ç™¼æ”¾é‚è¼¯

```javascript
// æ‰¹å‡†ç”³è«‹æ™‚
const initialTokens = 50;
currentBalance = user.sticker_credits || 0;
newBalance = currentBalance + initialTokens;

// æ‰¹å‡†å½±ç‰‡æ™‚
const completionTokens = 250;
currentBalance = user.sticker_credits || 0;
newBalance = currentBalance + completionTokens;
```

### äº¤æ˜“è¨˜éŒ„

æ¯æ¬¡ç™¼æ”¾ä»£å¹£éƒ½æœƒåœ¨ `token_transactions` è¡¨ä¸­è¨˜éŒ„ï¼š
- `user_id`: ç”¨æˆ¶çš„ LINE ID
- `amount`: ç™¼æ”¾ä»£å¹£æ•¸é‡
- `balance_after`: ç™¼æ”¾å¾Œé¤˜é¡
- `transaction_type`: `'youtuber_promotion'`
- `description`: æè¿°ï¼ˆå¦‚ï¼šYouTuber æ¨å»£è¨ˆç•« - ç”³è«‹é€šéçå‹µï¼‰
- `admin_note`: é »é“åç¨±å’Œç›¸é—œè³‡è¨Š

---

## ğŸ“ è³‡æ–™è¡¨çµæ§‹

### youtuber_promotions è¡¨

| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|------|------|------|
| application_id | TEXT | ç”³è«‹å”¯ä¸€ ID |
| channel_name | TEXT | é »é“åç¨± |
| channel_url | TEXT | é »é“é€£çµ |
| subscriber_count | INTEGER | è¨‚é–±æ•¸ |
| email | TEXT | è¯çµ¡ Email |
| line_id | TEXT | LINE IDï¼ˆç”¨æ–¼ç™¼æ”¾ä»£å¹£ï¼‰ |
| status | TEXT | `pending`, `approved`, `rejected`, `completed` |
| approval_reason | TEXT | å¯©æ ¸åŸå› /å‚™è¨» |
| tokens_awarded | INTEGER | å·²ç™¼æ”¾ä»£å¹£æ•¸ï¼ˆæš«æœªä½¿ç”¨ï¼‰ |
| video_url | TEXT | å½±ç‰‡é€£çµ |
| video_title | TEXT | å½±ç‰‡æ¨™é¡Œ |
| video_approval_status | TEXT | `pending`, `approved`, `rejected` |
| video_approval_reason | TEXT | å½±ç‰‡å¯©æ ¸åŸå›  |
| approved_at | TIMESTAMP | ç”³è«‹æ‰¹å‡†æ™‚é–“ |
| video_approved_at | TIMESTAMP | å½±ç‰‡æ‰¹å‡†æ™‚é–“ |

---

## âš ï¸ æ³¨æ„äº‹é …

### 1. LINE ID åŒ¹é…
- ä»£å¹£ç™¼æ”¾éœ€è¦ç”¨æˆ¶çš„ LINE ID åœ¨ `users` è¡¨ä¸­å­˜åœ¨
- å¦‚æœæ‰¾ä¸åˆ°ç”¨æˆ¶ï¼Œæœƒåœ¨æ§åˆ¶å°é¡¯ç¤ºè­¦å‘Šï¼Œä½†ä¸æœƒä¸­æ–·å¯©æ ¸æµç¨‹
- å»ºè­°åœ¨æ‰¹å‡†å‰ç¢ºèªç”¨æˆ¶å·²ç¶“ä½¿ç”¨éç³»çµ±

### 2. é‡è¤‡å¯©æ ¸é˜²è­·
- ç³»çµ±æœƒæª¢æŸ¥ç‹€æ…‹ï¼Œé˜²æ­¢é‡è¤‡æ‰¹å‡†
- å·²è™•ç†çš„ç”³è«‹ç„¡æ³•å†æ¬¡æ‰¹å‡†

### 3. ä»£å¹£è¿½è¹¤
- æ‰€æœ‰ä»£å¹£äº¤æ˜“éƒ½æœ‰å®Œæ•´è¨˜éŒ„
- å¯åœ¨ã€Œä»£å¹£ç®¡ç†ã€é é¢æŸ¥çœ‹ç”¨æˆ¶äº¤æ˜“æ­·å²

---

## ğŸ› æ•…éšœæ’é™¤

### å•é¡Œ 1ï¼šç„¡æ³•è¼‰å…¥ç”³è«‹åˆ—è¡¨
- æª¢æŸ¥ Supabase é€£æ¥
- ç¢ºèª `youtuber_promotions` è¡¨å·²å‰µå»º
- æŸ¥çœ‹ç€è¦½å™¨æ§åˆ¶å°éŒ¯èª¤

### å•é¡Œ 2ï¼šä»£å¹£æœªç™¼æ”¾
- æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦å­˜åœ¨æ–¼ `users` è¡¨
- ç¢ºèª LINE ID æ˜¯å¦åŒ¹é…
- æŸ¥çœ‹ Netlify Functions æ—¥èªŒ

### å•é¡Œ 3ï¼šå¯©æ ¸æŒ‰éˆ•ç„¡åæ‡‰
- æª¢æŸ¥ Netlify Functions æ˜¯å¦æ­£å¸¸éƒ¨ç½²
- æŸ¥çœ‹ Network æ¨™ç±¤çš„ API è«‹æ±‚
- ç¢ºèªç’°å¢ƒè®Šæ•¸è¨­ç½®æ­£ç¢º

---

## ğŸ” æ¸¬è©¦å»ºè­°

### æœ¬åœ°æ¸¬è©¦
```bash
# å•Ÿå‹•æœ¬åœ°é–‹ç™¼æœå‹™å™¨
npm run dev

# è¨ªå•
http://localhost:8888/admin/youtuber-applications.html
```

### ç”Ÿç”¢æ¸¬è©¦
1. å‰µå»ºä¸€å€‹æ¸¬è©¦ç”³è«‹
2. åœ¨ç®¡ç†å¾Œå°å¯©æ ¸
3. ç¢ºèªä»£å¹£æ˜¯å¦æ­£ç¢ºç™¼æ”¾
4. æª¢æŸ¥äº¤æ˜“è¨˜éŒ„

---

## ğŸ“ æŠ€è¡“æ”¯æ´

å¦‚æœ‰å•é¡Œï¼Œè«‹æŸ¥çœ‹ï¼š
- Netlify Functions æ—¥èªŒ
- Supabase Dashboard â†’ Table Editor
- ç€è¦½å™¨æ§åˆ¶å°
- Network è«‹æ±‚è©³æƒ…

---

## âœ… å®Œæˆæ¸…å–®

éƒ¨ç½²å‰è«‹ç¢ºèªï¼š
- [ ] Supabase è¡¨çµæ§‹å·²æ›´æ–°
- [ ] Netlify Functions å·²éƒ¨ç½²
- [ ] ç®¡ç†å¾Œå°å¯æ­£å¸¸è¨ªå•
- [ ] æ¸¬è©¦ç”³è«‹å¯æ­£å¸¸å¯©æ ¸
- [ ] ä»£å¹£ç™¼æ”¾åŠŸèƒ½æ­£å¸¸
- [ ] äº¤æ˜“è¨˜éŒ„æ­£ç¢ºé¡¯ç¤º

