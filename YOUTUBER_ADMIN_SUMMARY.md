# YouTuber æ¨å»£ç®¡ç†åŠŸèƒ½ - å®Œæˆç¸½çµ

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. ç®¡ç†å¾Œå°å…¥å£
- âœ… åœ¨ç®¡ç†é¦–é æ·»åŠ ã€ŒğŸ¬ YouTuber æ¨å»£ç®¡ç†ã€å¡ç‰‡
- âœ… é¡¯ç¤ºå¾…å¯©æ ¸ç”³è«‹æ•¸é‡å¾½ç« 
- âœ… è‡ªå‹•çµ±è¨ˆå¾…å¯©æ ¸æ•¸é‡

### 2. å¯©æ ¸ç®¡ç†é é¢
- âœ… å®Œæ•´çš„ç”³è«‹åˆ—è¡¨å±•ç¤º
- âœ… çµ±è¨ˆé¢æ¿ï¼ˆå¾…å¯©æ ¸ã€å·²æ‰¹å‡†ã€å·²å®Œæˆã€å·²æ‹’çµ•ï¼‰
- âœ… ç‹€æ…‹ç¯©é¸åŠŸèƒ½
- âœ… æœå°‹åŠŸèƒ½ï¼ˆé »é“åç¨±ã€Emailï¼‰
- âœ… è©³æƒ…æŸ¥çœ‹æ¨¡æ…‹æ¡†
- âœ… å¯©æ ¸æŒ‰éˆ•ï¼ˆæ‰¹å‡†/æ‹’çµ•ï¼‰
- âœ… å½±ç‰‡å¯©æ ¸æŒ‰éˆ•

### 3. ä»£å¹£è‡ªå‹•ç™¼æ”¾
- âœ… æ‰¹å‡†ç”³è«‹ â†’ è‡ªå‹•ç™¼æ”¾ 50 ä»£å¹£
- âœ… æ‰¹å‡†å½±ç‰‡ â†’ è‡ªå‹•ç™¼æ”¾ 250 ä»£å¹£
- âœ… äº¤æ˜“è¨˜éŒ„è‡ªå‹•å¯«å…¥ `token_transactions` è¡¨
- âœ… éŒ¯èª¤è™•ç†ï¼ˆç”¨æˆ¶ä¸å­˜åœ¨æ™‚è­¦å‘Šï¼‰

### 4. å¾Œç«¯ API
- âœ… `youtuber-promotion-list.js` - ç²å–ç”³è«‹åˆ—è¡¨
- âœ… `youtuber-promotion-approve.js` - å¯©æ ¸ç”³è«‹
- âœ… `youtuber-promotion-approve-video.js` - å¯©æ ¸å½±ç‰‡
- âœ… å®Œæ•´çš„é©—è­‰é‚è¼¯
- âœ… CORS æ”¯æ´
- âœ… éŒ¯èª¤è™•ç†

### 5. è³‡æ–™è¡¨æ›´æ–°
- âœ… æ·»åŠ å½±ç‰‡å¯©æ ¸ç›¸é—œæ¬„ä½
- âœ… Migration SQL æ–‡ä»¶
- âœ… è¡¨çµæ§‹æ›´æ–° SQL

### 6. QuickReply æ›´æ–°
- âœ… ç”Ÿæˆè²¼åœ–å®Œæˆå¾Œ QuickReply æ·»åŠ æ¨å»£é€£çµ
- âœ… æˆ‘çš„è²¼åœ–é é¢ QuickReply æ·»åŠ æ¨å»£é€£çµ
- âœ… ä½¿ç”¨ URI action é–‹å•Ÿæ¨å»£é é¢

---

## ğŸ“ ä¿®æ”¹/æ–°å¢çš„æª”æ¡ˆ

### å‰ç«¯æ–‡ä»¶
1. `public/admin/index.html` - æ·»åŠ  YouTuber ç®¡ç†å¡ç‰‡å’Œçµ±è¨ˆ
2. `public/admin/youtuber-applications.html` - å®Œå…¨é‡æ§‹ï¼Œä½¿ç”¨ Supabase ç›´æ¥æŸ¥è©¢

### å¾Œç«¯æ–‡ä»¶
1. `functions/youtuber-promotion-list.js` - æ–°å¢
2. `functions/youtuber-promotion-approve.js` - æ–°å¢
3. `functions/youtuber-promotion-approve-video.js` - æ–°å¢
4. `functions/line-webhook.js` - æ›´æ–° QuickReply

### è³‡æ–™åº«æ–‡ä»¶
1. `supabase/migrations/20250115_youtuber_promotion.sql` - æ›´æ–°
2. `supabase/migrations/20250116_add_youtuber_video_fields.sql` - æ–°å¢

### æ–‡æª”æ–‡ä»¶
1. `YOUTUBER_ADMIN_DEPLOYMENT.md` - æ–°å¢
2. `YOUTUBER_ADMIN_SUMMARY.md` - æœ¬æ–‡ä»¶

---

## ğŸ¯ åŠŸèƒ½æµç¨‹

### å®Œæ•´çå‹µæµç¨‹

```
ç”¨æˆ¶ç”³è«‹
    â†“
[å¾…å¯©æ ¸] status = 'pending'
    â†“
ç®¡ç†å“¡æ‰¹å‡†ç”³è«‹
    â†“
âœ… ç™¼æ”¾ 50 ä»£å¹£
    â†“
[å·²æ‰¹å‡†] status = 'approved'
    â†“
ç”¨æˆ¶æäº¤å½±ç‰‡ï¼ˆåœ¨å‰ç«¯é é¢ï¼‰
    â†“
å½±ç‰‡ç­‰å¾…å¯©æ ¸ video_approval_status = 'pending'
    â†“
ç®¡ç†å“¡æ‰¹å‡†å½±ç‰‡
    â†“
âœ… ç™¼æ”¾ 250 ä»£å¹£
    â†“
[å·²å®Œæˆ] status = 'completed'
    â†“
ç¸½çå‹µï¼š300 ä»£å¹£ ğŸ‰
```

---

## ğŸ’¡ é—œéµæŠ€è¡“å¯¦ç¾

### 1. ä»£å¹£ç™¼æ”¾é‚è¼¯
```javascript
// æŸ¥æ‰¾ç”¨æˆ¶
const { data: user } = await supabase
  .from('users')
  .select('line_user_id, sticker_credits')
  .eq('line_user_id', application.line_id)
  .maybeSingle();

// æ›´æ–°é¤˜é¡
const newBalance = (user.sticker_credits || 0) + tokens;
await supabase
  .from('users')
  .update({ sticker_credits: newBalance })
  .eq('line_user_id', application.line_id);

// è¨˜éŒ„äº¤æ˜“
await supabase.from('token_transactions').insert([{
  user_id: application.line_id,
  amount: tokens,
  balance_after: newBalance,
  transaction_type: 'youtuber_promotion',
  description: `YouTuber æ¨å»£è¨ˆç•« - çå‹µ`
}]);
```

### 2. å‰ç«¯ç‹€æ…‹ç®¡ç†
- ä½¿ç”¨ Supabase JS SDK ç›´æ¥æŸ¥è©¢
- æœ¬åœ°ç‹€æ…‹ç®¡ç†ï¼ˆ`applications` é™£åˆ—ï¼‰
- å¯¦æ™‚çµ±è¨ˆæ›´æ–°

### 3. å¯©æ ¸ç‹€æ…‹æ§åˆ¶
- æª¢æŸ¥ç•¶å‰ç‹€æ…‹é˜²æ­¢é‡è¤‡å¯©æ ¸
- æ ¹æ“šç‹€æ…‹é¡¯ç¤ºä¸åŒæ“ä½œæŒ‰éˆ•
- ç‹€æ…‹è½‰æ›é‚è¼¯åš´æ ¼æ§åˆ¶

---

## ğŸ” å®‰å…¨æ€§

- âœ… ä½¿ç”¨ Supabase Service Role Keyï¼ˆå¾Œç«¯ï¼‰
- âœ… ç‹€æ…‹æª¢æŸ¥é˜²æ­¢é‡è¤‡æ“ä½œ
- âœ… è¼¸å…¥é©—è­‰å’ŒéŒ¯èª¤è™•ç†
- âœ… äº¤æ˜“è¨˜éŒ„å¯©è¨ˆè¿½è¹¤

---

## ğŸ“Š è³‡æ–™è¡¨é—œä¿‚

```
youtuber_promotions
    â”œâ”€â”€ line_id â†’ users.line_user_id (ç™¼æ”¾ä»£å¹£)
    â””â”€â”€ è¨˜éŒ„ â†’ token_transactions (äº¤æ˜“è¨˜éŒ„)
```

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

### ç®¡ç†å“¡æ“ä½œæ­¥é©Ÿ

1. **ç™»å…¥ç®¡ç†å¾Œå°**
   - è¨ªå• `/admin/login.html`
   
2. **æŸ¥çœ‹ç”³è«‹**
   - é»æ“Šã€ŒğŸ¬ YouTuber æ¨å»£ç®¡ç†ã€å¡ç‰‡
   - æˆ–ç›´æ¥è¨ªå• `/admin/youtuber-applications.html`

3. **å¯©æ ¸ç”³è«‹**
   - é»æ“Šã€ŒæŸ¥çœ‹è©³æƒ…ã€
   - é–±è®€é »é“è³‡è¨Šå’Œæ‹ç‰‡è¨ˆç•«
   - é»æ“Šã€Œâœ… æ‰¹å‡†ï¼ˆç™¼æ”¾ 50 ä»£å¹£ï¼‰ã€æˆ–ã€ŒâŒ æ‹’çµ•ã€

4. **å¯©æ ¸å½±ç‰‡**
   - ç­‰å¾… YouTuber æäº¤å½±ç‰‡
   - æŸ¥çœ‹å½±ç‰‡é€£çµ
   - é»æ“Šã€Œâœ… æ‰¹å‡†å½±ç‰‡ï¼ˆç™¼æ”¾ 250 ä»£å¹£ï¼‰ã€æˆ–ã€ŒâŒ æ‹’çµ•å½±ç‰‡ã€

---

## ğŸ“± ç”¨æˆ¶é«”é©—æ”¹é€²

### QuickReply æ–°å¢æ¨å»£é€£çµ

**ä½ç½® 1ï¼šç”Ÿæˆè²¼åœ–å®Œæˆå¾Œ**
```
ğŸ¬ YouTuber æ¨å»£è¨ˆç•« | ğŸ“‹ æŸ¥è©¢é€²åº¦ | ğŸ“ æˆ‘çš„è²¼åœ– | ğŸ åˆ†äº«çµ¦å¥½å‹
```

**ä½ç½® 2ï¼šæˆ‘çš„è²¼åœ–é é¢**
```
ğŸ¬ YouTuber æ¨å»£è¨ˆç•« | ğŸ“ æˆ‘çš„è²¼åœ– | ğŸ¨ å‰µå»ºè²¼åœ–
```

ç”¨æˆ¶é»æ“Šå¾Œæœƒåœ¨ç€è¦½å™¨ä¸­é–‹å•Ÿæ¨å»£é é¢ã€‚

---

## âœ¨ ç‰¹è‰²åŠŸèƒ½

1. **è‡ªå‹•ä»£å¹£ç™¼æ”¾** - æ‰¹å‡†å¾Œç«‹å³ç™¼æ”¾ï¼Œç„¡éœ€æ‰‹å‹•æ“ä½œ
2. **å®Œæ•´å¯©è¨ˆè¿½è¹¤** - æ‰€æœ‰äº¤æ˜“éƒ½æœ‰è¨˜éŒ„
3. **å½ˆæ€§å¯©æ ¸** - å¯æ‰¹å‡†æˆ–æ‹’çµ•ï¼Œå¯æ·»åŠ åŸå› å‚™è¨»
4. **å¯¦æ™‚çµ±è¨ˆ** - ç®¡ç†é¦–é é¡¯ç¤ºå¾…å¯©æ ¸æ•¸é‡
5. **ç”¨æˆ¶å‹å¥½** - æ¸…æ™°çš„ç‹€æ…‹é¡¯ç¤ºå’Œæ“ä½œæŒ‰éˆ•

---

## ğŸ‰ çµè«–

YouTuber æ¨å»£ç®¡ç†åŠŸèƒ½å·²å…¨éƒ¨å®Œæˆï¼ŒåŒ…æ‹¬ï¼š
- âœ… å®Œæ•´çš„ç®¡ç†å¾Œå°ç•Œé¢
- âœ… è‡ªå‹•ä»£å¹£ç™¼æ”¾ç³»çµ±
- âœ… å¯©æ ¸å·¥ä½œæµç¨‹
- âœ… ç”¨æˆ¶æ¨å»£å…¥å£
- âœ… è©³ç´°çš„æ–‡æª”

ç³»çµ±å·²æº–å‚™å°±ç·’ï¼Œå¯ä»¥é–‹å§‹æ¥å— YouTuber ç”³è«‹ï¼ğŸš€

