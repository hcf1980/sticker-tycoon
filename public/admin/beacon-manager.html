<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LINE Beacon ç®¡ç†</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="/tech-theme.css" rel="stylesheet">
  <style>
    input,textarea,select{background:rgba(30,41,59,0.9)!important;border:1px solid rgba(99,179,237,0.3)!important;color:#fff!important;padding:12px!important;border-radius:8px!important;width:100%!important}
    input:focus,textarea:focus,select:focus{border-color:#63b3ed!important;box-shadow:0 0 0 3px rgba(99,179,237,0.2)!important}
    input::placeholder,textarea::placeholder{color:rgba(255,255,255,0.4)!important}
  </style>
</head>
<body class="tech-bg min-h-screen text-white">
  <nav class="border-b border-gray-700 bg-gray-900/50">
    <div class="container mx-auto px-4 py-4 flex justify-between">
      <h1 class="text-xl font-bold">ğŸ“¡ LINE Beacon ç®¡ç†</h1>
      <div class="flex gap-4">
        <a href="/admin/index.html" class="text-cyan-400 hover:text-cyan-300">â† è¿”å›</a>
        <button id="logoutBtn" class="text-red-400 hover:text-red-300">ç™»å‡º</button>
      </div>
    </div>
  </nav>
  
  <div class="container mx-auto p-6">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-2xl font-bold">è¨­å‚™åˆ—è¡¨</h2>
      <button id="addBeaconBtn" class="bg-cyan-600 hover:bg-cyan-700 px-6 py-2 rounded-lg">â• æ–°å¢è¨­å‚™</button>
    </div>
    
    <div id="devicesContainer" class="space-y-4"></div>
  </div>

  <!-- æ–°å¢/ç·¨è¼¯ Modal -->
  <div id="deviceModal" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50">
    <div class="bg-gray-900 border border-cyan-500/30 rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
      <h3 id="modalTitle" class="text-xl font-bold mb-4">æ–°å¢ Beacon è¨­å‚™</h3>
      <form id="deviceForm" class="space-y-4">
        <div>
          <label class="block text-sm mb-2">è¨­å‚™åç¨± <span class="text-red-500">*</span></label>
          <input type="text" name="device_name" required placeholder="ä¾‹ï¼šè¾¦å…¬å®¤å…¥å£ Beacon">
        </div>
        <div>
          <label class="block text-sm mb-2">HWID (Hardware ID) <span class="text-red-500">*</span></label>
          <input type="text" name="hwid" required placeholder="10ä½16é€²åˆ¶å­—å…ƒ" pattern="[0-9a-fA-F]{10}" maxlength="10">
          <small class="text-gray-400">å¿…é ˆæ˜¯ 10 ä½ 16 é€²åˆ¶å­—å…ƒ</small>
        </div>
        <div>
          <label class="block text-sm mb-2">Vendor Key</label>
          <input type="text" name="vendor_key" placeholder="8ä½16é€²åˆ¶å­—å…ƒ" pattern="[0-9a-fA-F]{8}" maxlength="8">
        </div>
        <div>
          <label class="block text-sm mb-2">Lot Key</label>
          <input type="text" name="lot_key" placeholder="16ä½16é€²åˆ¶å­—å…ƒ" pattern="[0-9a-fA-F]{16}" maxlength="16">
        </div>
        <div>
          <label class="block text-sm mb-2">ä½ç½®</label>
          <input type="text" name="location" placeholder="ä¾‹ï¼šå°åŒ—è¾¦å…¬å®¤ä¸€æ¨“">
        </div>
        <div>
          <label class="block text-sm mb-2">èªªæ˜</label>
          <textarea name="description" rows="3" placeholder="è¨­å‚™èªªæ˜..."></textarea>
        </div>
        <div class="flex items-center gap-2">
          <input type="checkbox" name="is_active" checked id="is_active">
          <label for="is_active">å•Ÿç”¨æ­¤è¨­å‚™</label>
        </div>
        <div class="flex gap-3 pt-4">
          <button type="submit" class="bg-cyan-600 hover:bg-cyan-700 px-6 py-2 rounded-lg flex-1">ğŸ’¾ å„²å­˜</button>
          <button type="button" id="closeModal" class="bg-gray-700 hover:bg-gray-600 px-6 py-2 rounded-lg">âœ• å–æ¶ˆ</button>
        </div>
      </form>
    </div>
  </div>

  <script src="/admin/beacon-manager-simple.js"></script>
</body>
</html>
