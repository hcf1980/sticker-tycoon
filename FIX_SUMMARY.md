# ç™½æ–‘å•é¡Œä¿®å¾©ç¸½çµ

## ğŸ¯ å•é¡Œè­˜åˆ¥

ä½ çš„è²¼åœ–ç”Ÿæˆç³»çµ±å‡ºç¾**ä¸æ˜ç™½æ–‘**å•é¡Œï¼Œæ ¹æœ¬åŸå› åœ¨æ–¼ `grid-generator.js` ä¸­çš„ `removeSimpleBackground()` å‡½æ•¸ã€‚

## ğŸ” ä¸‰å€‹ä¸»è¦å•é¡Œ

### å•é¡Œ 1: èƒŒæ™¯æª¢æ¸¬éæ–¼æ¿€é€²
**ä½ç½®**: `grid-generator.js` ç¬¬ 465-477 è¡Œ

**èˆŠä»£ç¢¼å•é¡Œ**:
```javascript
const isWhite = r > 240 && g > 240 && b > 240;  // å¤ªå¯¬æ³›ï¼
const isNearWhite = r > 230 && g > 230 && b > 230;  // èª¤åˆªè†šè‰²
const isLightGray = r > 200 && r < 240;  // èª¤åˆªé ­é«®
const isCheckerGray = r > 140 && r < 210;  // èª¤åˆªçœ¼ç›
```

**å¾Œæœ**: 
- è§’è‰²çœ¼ç™½è¢«ç•¶ä½œèƒŒæ™¯åˆªé™¤ â†’ ç™½æ–‘
- ç‰™é½’è¢«åˆªé™¤ â†’ ç™½æ–‘
- è¡£æœäº®éƒ¨è¢«åˆªé™¤ â†’ ç™½æ–‘

### å•é¡Œ 2: é‚Šç·£æ¡æ¨£é»ä¸è¶³
**ä½ç½®**: `grid-generator.js` ç¬¬ 482-486 è¡Œ

**èˆŠä»£ç¢¼**: åªæ¡æ¨£ 8 å€‹é‚Šç·£é»
**æ–°ä»£ç¢¼**: æ¡æ¨£ 20+ å€‹é‚Šç·£é»ï¼ˆå‡å‹»åˆ†ä½ˆï¼‰

### å•é¡Œ 3: è§¸ç™¼é–¾å€¼éä½
**ä½ç½®**: `grid-generator.js` ç¬¬ 498 è¡Œ

**èˆŠä»£ç¢¼**: `if (bgRatio < 0.5)` åªè¦ 50% é‚Šç·£æ˜¯èƒŒæ™¯è‰²å°±è§¸ç™¼
**æ–°ä»£ç¢¼**: `if (bgRatio < 0.8)` éœ€è¦ 80% æ‰è§¸ç™¼

## âœ… å·²å¯¦æ–½çš„ä¿®å¾©

### ä¿®å¾© 1: æ›´åš´æ ¼çš„èƒŒæ™¯æª¢æ¸¬
```javascript
// åªç§»é™¤ç´”ç™½èƒŒæ™¯ï¼ˆRGB éƒ½ > 250ï¼‰
const isPureWhite = r > 250 && g > 250 && b > 250;

// åªç§»é™¤ç‰¹å®šçš„æ£‹ç›¤æ ¼é¡è‰²ï¼ˆç²¾ç¢ºåŒ¹é…ï¼‰
const isCheckerboardLight = r === 204 && g === 204 && b === 204;
const isCheckerboardDark = r === 153 && g === 153 && b === 153;
```

**å„ªå‹¢**:
- âœ… ä¿ç•™è§’è‰²çœ¼ç™½
- âœ… ä¿ç•™ç‰™é½’
- âœ… ä¿ç•™è¡£æœäº®éƒ¨
- âœ… ä¿ç•™é ­é«®é‚Šç·£
- âœ… ä»èƒ½ç§»é™¤æ£‹ç›¤æ ¼èƒŒæ™¯

### ä¿®å¾© 2: å¢åŠ é‚Šç·£æ¡æ¨£é»
```javascript
// å››è§’
samplePoints.push([0, 0], [width-1, 0], [0, height-1], [width-1, height-1]);

// ä¸Šä¸‹é‚Šç·£å‡å‹»æ¡æ¨£
const xStep = Math.max(1, Math.floor(width / 5));
for (let x = 0; x < width; x += xStep) {
  samplePoints.push([x, 0]);
  samplePoints.push([x, height-1]);
}

// å·¦å³é‚Šç·£å‡å‹»æ¡æ¨£
const yStep = Math.max(1, Math.floor(height / 5));
for (let y = 0; y < height; y += yStep) {
  samplePoints.push([0, y]);
  samplePoints.push([width-1, y]);
}
```

### ä¿®å¾© 3: æé«˜è§¸ç™¼é–¾å€¼
```javascript
if (bgRatio < 0.8) {  // å¾ 0.5 æ”¹ç‚º 0.8
  console.log(`    â­ï¸ é‚Šç·£éèƒŒæ™¯è‰²ï¼ˆ< 80%ï¼‰ï¼Œè·³éå»èƒŒ`);
  return imageBuffer;
}
```

## ğŸ“Š ä¿®å¾©å‰å¾Œå°æ¯”

| ç‰¹å¾µ | ä¿®å¾©å‰ | ä¿®å¾©å¾Œ |
|------|--------|--------|
| çœ¼ç™½ | âŒ è¢«åˆªé™¤ï¼ˆç™½æ–‘ï¼‰ | âœ… ä¿ç•™ |
| ç‰™é½’ | âŒ è¢«åˆªé™¤ï¼ˆç™½æ–‘ï¼‰ | âœ… ä¿ç•™ |
| è¡£æœäº®éƒ¨ | âŒ è¢«åˆªé™¤ï¼ˆç™½æ–‘ï¼‰ | âœ… ä¿ç•™ |
| é ­é«®é‚Šç·£ | âŒ è¢«åˆªé™¤ï¼ˆæ¨¡ç³Šï¼‰ | âœ… æ¸…æ™° |
| æ£‹ç›¤æ ¼èƒŒæ™¯ | âœ… ç§»é™¤ | âœ… ç§»é™¤ |
| ç´”ç™½èƒŒæ™¯ | âœ… ç§»é™¤ | âœ… ç§»é™¤ |

## ğŸ§ª é©—è­‰æ–¹æ³•

1. **ç”Ÿæˆæ¸¬è©¦è²¼åœ–**
   - ä½¿ç”¨åŒ…å«çœ¼ç™½ã€ç‰™é½’çš„äººç‰©ç…§ç‰‡
   - è§€å¯Ÿç”Ÿæˆçš„è²¼åœ–æ˜¯å¦æœ‰ç™½æ–‘

2. **æª¢æŸ¥æ—¥èªŒè¼¸å‡º**
   - æŸ¥çœ‹ `ğŸ” é‚Šç·£èƒŒæ™¯æª¢æ¸¬` çš„æ¯”ä¾‹
   - æ‡‰è©²çœ‹åˆ°æ›´å¤šçš„æ¡æ¨£é»ä¿¡æ¯

3. **å°æ¯”æ•ˆæœ**
   - ä¿®å¾©å‰: çœ¼ç™½å€åŸŸå‡ºç¾ç™½æ–‘
   - ä¿®å¾©å¾Œ: çœ¼ç™½æ¸…æ™°ä¿ç•™

## ğŸ“ ä¿®æ”¹æ–‡ä»¶

- âœ… `functions/grid-generator.js` (ç¬¬ 464-513 è¡Œ)

## ğŸš€ ä¸‹ä¸€æ­¥

1. éƒ¨ç½²ä¿®å¾©å¾Œçš„ä»£ç¢¼
2. ç”Ÿæˆæ¸¬è©¦è²¼åœ–é©—è­‰æ•ˆæœ
3. å¦‚æœä»æœ‰å•é¡Œï¼Œå¯è€ƒæ…®é€²ä¸€æ­¥å„ªåŒ– Flood Fill ç®—æ³•

